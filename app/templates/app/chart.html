<html>
{% load static %}

<head>
    <script type="text/javascript" src="{% static 'charts/loader.js' %}"></script>
    <script type="text/javascript">

        let families = JSON.parse(`{{families_s|escapejs}}`)
        google.charts.load('current', { packages: ["orgchart"] });
        google.charts.setOnLoadCallback(drawChart);
        // var data = 1
        function drawChart() {
            let data = new google.visualization.DataTable();

            data.addColumn('string', 'Name');
            data.addColumn('string', 'Manager');
            data.addColumn('string', 'ToolTip');

            families.forEach(family => {
                // childs=family.childs.forEach(child=>{
                //     return child
                // })
                data.addRow(
                    [{
                        'v': family.id.toString(), 'f': `
                        <div>`+ family.father.full_name + `</div>
                        <div>`+ family.mother.full_name + `</div>
                        `
                    },
                    family.master_family_id.toString(), 'The President']
                )
            });





            // For each orgchart box, provide the name, manager, and tooltip to show.


            // Create the chart.
            var chart = new google.visualization.OrgChart(document.getElementById('chart_div'));
            // Draw the chart, setting the allowHtml option to true for the tooltips.
            chart.draw(data, { 'allowHtml': true });
        }
    </script>
</head>

<body>
    <div id="chart_div"></div>
</body>

</html>